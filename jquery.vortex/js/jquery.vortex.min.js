(function(b){var a=function(j,s){var e;
var c=0;
var d=false;
var p=b(j);
var k=[];
var r=[];
var o=this;
var f=[];
var i=b.extend({speed:50,clockwise:true,manualAdvance:false,beforeAnimation:null,afterAnimation:null},s||{});
var n=p.width()*2;
var q=p.height()/2;
var m=p.width()/2;
var l={currentChild:"",totalChildren:0,checkRadians:new Array(),radians:0};
e=p.children().css("position","absolute");
e.each(function(t){l.totalChildren++
});
l.radians=(Math.PI*2/l.totalChildren);
var h=(n/2)/Math.PI;
e.each(function(w){var y=b(this).height()/2;
var t=b(this).width()/2;
var x=[];
for(var u=0;
u<n;
u+=1){x.push({top:((1+Math.sin(Math.PI+(u/h)))*q)-y,left:m*(1+Math.cos(u/h))-t})
}var v=w*Math.ceil(n/e.length);
r[w]=v;
b(this).css({top:x[v].top,left:x[v].left});
k.push(x)
});
this.stop=function(){clearInterval(c);
e.stop();
g(false)
};
this.setClockwise=function(t){i.clockwise=t;
if(d){this.start()
}};
var g=function(t){d=t;
if(d===true){p.addClass("vortex-animating");
if(i.beforeAnimation){if(i.beforeAnimation.call()===false){return false
}}}else{p.removeClass("vortex-animating");
if(i.afterAnimation){i.afterAnimation.call(null,b(this))
}}};
this.start=function(v){this.stop();
g(true);
var t;
if(i.clockwise===true){t=-1
}else{t=1
}var u=function(){e.each(function(y){var z=k[y];
var x=r[y]+t;
if(x<0){x=n-1
}if(x>n-1){x=0
}b(this).css({left:z[x].left,top:z[x].top});
r[y]=x
})
};
function w(B,z,A){var y=0;
c=window.setInterval(function(){B();
if(++y===A){window.clearInterval(c);
o.stop()
}},z)
}if(v){w(u,i.speed,Math.floor(n/e.length*v))
}else{c=setInterval(u,i.speed)
}};
this.setSpeed=function(t){i.speed=t;
if(d){this.start()
}};
if(!i.manualAdvance){this.start()
}this.step=function(t){this.start(t);
return
}
};
b.fn.vortex=function(c){return this.each(function(){var e=b(this);
if(e.data("vortex")){return
}var d=new a(this,c);
e.data("vortex",d)
})
}
})(jQuery);